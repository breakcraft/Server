[label,player_special_attack]
// order of checks is from osrs
if (~npc_is_attackable() = false) {
    return;
}
if (~sa_enough_energy = false) {
    return;
}
if (%action_delay > map_clock) {
    p_opnpc(2);
    return;
}
if (npc_stat(hitpoints) = 0) {
    p_stopaction;
    return;
}
def_obj $weapon = inv_getobj(worn, ^wearpos_rhand);
%action_delay = add(map_clock, oc_param($weapon, attackrate));
p_opnpc(2);
switch_obj($weapon) {
    case dragon_dagger, dragon_dagger_p : @pvm_dragon_dagger_sa;
    case dragon_longsword : @pvm_dragon_longsword_sa;
    case dragon_mace : @pvm_dragon_mace_sa;
    case magic_shortbow : @pvm_magic_shortbow_sa;
    case magic_longbow : @pvm_magic_longbow_sa;
    case rune_thrownaxe : @pvm_rune_thrownaxe_sa;
    case dragon_spear, dragon_spear_p : @pvm_dragon_spear_sa;
}